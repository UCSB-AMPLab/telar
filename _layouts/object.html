---
layout: default
---

<div class="container my-5">
  <div class="row">
    <div class="col-12">
      <a href="{{ '/collection/' | relative_url }}" class="btn btn-sm btn-outline-secondary mb-3">
        ‚Üê Back to Collection
      </a>
    </div>
  </div>

  <div class="row">
    <!-- Object Viewer -->
    <div class="col-lg-8">
      <div id="object-viewer" style="width: 100%; height: 600px; background: #000;"></div>
    </div>

    <!-- Object Metadata -->
    <div class="col-lg-4">
      <h1>{{ page.title }}</h1>

      {% if page.description %}
      <p class="lead">{{ page.description }}</p>
      {% endif %}

      <dl class="row mt-4">
        {% if page.creator %}
        <dt class="col-sm-4">Creator</dt>
        <dd class="col-sm-8">{{ page.creator }}</dd>
        {% endif %}

        {% if page.period %}
        <dt class="col-sm-4">Period</dt>
        <dd class="col-sm-8">{{ page.period }}</dd>
        {% endif %}

        {% if page.medium %}
        <dt class="col-sm-4">Medium</dt>
        <dd class="col-sm-8">{{ page.medium }}</dd>
        {% endif %}

        {% if page.dimensions %}
        <dt class="col-sm-4">Dimensions</dt>
        <dd class="col-sm-8">{{ page.dimensions }}</dd>
        {% endif %}

        {% if page.location %}
        <dt class="col-sm-4">Location</dt>
        <dd class="col-sm-8">{{ page.location }}</dd>
        {% endif %}

        {% if page.credit %}
        <dt class="col-sm-4">Credit</dt>
        <dd class="col-sm-8">{{ page.credit }}</dd>
        {% endif %}

        {% if page.iiif_manifest %}
        <dt class="col-sm-4">IIIF Manifest</dt>
        <dd class="col-sm-8"><a href="{{ page.iiif_manifest }}" target="_blank" rel="noopener">View manifest</a></dd>
        {% elsif page.object_id %}
        <dt class="col-sm-4">IIIF Manifest</dt>
        <dd class="col-sm-8"><a href="{{ '/iiif/objects/' | append: page.object_id | append: '/info.json' | relative_url }}" target="_blank" rel="noopener">View manifest</a></dd>
        {% endif %}
      </dl>

      <!-- Long Description -->
      {% if content %}
      <div class="object-content mt-4 pt-4 border-top">
        {{ content }}
      </div>
      {% endif %}

      <!-- Related Chapters -->
      {% assign related_chapters = site.chapters | where_exp: "chapter", "chapter.objects contains page.object_id" %}
      {% if related_chapters.size > 0 %}
      <div class="related-chapters mt-4 pt-4 border-top">
        <h3>Appears in Chapters</h3>
        <ul class="list-unstyled">
          {% for chapter in related_chapters %}
          <li class="mb-2">
            <a href="{{ chapter.url | relative_url }}">{{ chapter.chapter_number }}. {{ chapter.title }}</a>
          </li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<!-- UniversalViewer IIIF Viewer -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/universalviewer@4.0.0/dist/uv.css">
<script src="https://cdn.jsdelivr.net/npm/universalviewer@4.0.0/dist/umd/UV.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    {% if page.iiif_manifest %}
    const manifestUrl = '{{ page.iiif_manifest }}';
    {% elsif page.object_id %}
    const manifestUrl = '{{ site.baseurl }}/iiif/objects/{{ page.object_id }}/info.json';
    {% else %}
    console.error('No IIIF source specified');
    return;
    {% endif %}

    console.log('Loading IIIF resource with UniversalViewer:', manifestUrl);

    // Initialize UniversalViewer with IIIF manifest
    var urlAdaptor = new UV.IIIFURLAdaptor();
    const data = urlAdaptor.getInitialData({
      manifest: manifestUrl,
      embedded: true
    });

    var uv = UV.init('object-viewer', data);
    urlAdaptor.bindTo(uv);
  });
</script>
